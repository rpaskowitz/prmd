<%-
  path = build_link_path(schema, link)
  link_schema_properties_template = Prmd::Template::load('link_schema_properties.erb', options[:template])
-%>
### <%= title %> <%= link['title'] %>
<%= link['description'] %>

```
<%= link['method'] %> <%= path %>
```

<%- if link.has_key?('schema') && link['schema'].has_key?('properties') %>

<%= link['description'] %>
<%- if link['schema']['properties'] && !link['schema']['properties'].empty? %>
  <%-
    required = link['schema']['required']
    attributes = extract_attributes(schema, link['schema']['properties'])
  %>
<%- end %>
<%- unless attributes.empty? %>
### Attributes
| Name | Type | Description | Example |
| ------- | ------- | ------- | ------- |
  <%- attributes.each do |(key, type, description, example)| %>
| <%- if required.include?(key) %>**<%- end %><%= key %><%- if required.include?(key) %>***<%- end %> | *<%= type %>* | <%= description %> | <%= example %> |
  <%- end %>
<%- end %>
<%- end %>

#### Curl Example
<%=
  Prmd::Template::render(File.join('schemata', 'link_curl_example.erb'), File.dirname(options[:template]), {
    options:         options,
    resource:        resource,
    schema:          schema,
    schemata:        schemata,
    link:            link,
    path:            path
  })
%>

#### Response Example
```
HTTP/1.1 <%= case link['rel']
  when 'create'
    '201 Created'
  when 'empty'
    '202 Accepted'
  else
    '200 OK'
  end %>
```
```json
  <%- if link['rel'] == 'empty' %>
  <%- elsif link.has_key?('targetSchema') && link['targetSchema'].has_key?('properties') %>
<%= JSON.pretty_generate(schema.schema_example(link['targetSchema'])) %>
  <%- elsif link['rel'] == 'instances' %>
<%= JSON.pretty_generate([schema.schemata_example(resource)]) %>
  <%- else %>
<%= JSON.pretty_generate(schema.schemata_example(resource)) %>
  <%- end %>
```
